<ion-view title="HISTORY" cache-view="false"
          ng-app="app.history"
          ng-controller="historytrl">
    <ion-nav-buttons side="right">
      <button class="button button-icon icon ion-android-refresh"
              ng-click="loadReservations()"></button>
    </ion-nav-buttons>
    <ion-content padding="true" class="has-header">
        <ion-list>
            <ion-item menu-close="" class="item-divider item-icon-right">
                <i class="icon"></i>Reservation
            </ion-item>
            <ion-item class="egobie-history-empty"
                      ng-show="reservations.length === 0">
                <hr align="center">Your reservations will be listed here<hr align="center">
            </ion-item>

            <ion-item menu-close="" class="card"
                      ng-repeat="reservation in reservations">
                <ion-list class="card">
                    <ion-item class="item-avatar">
                        <img class="egobie-avatar"/>
                        <h2>{{reservation.plate}}</h2>
                        <p>
                            <a href="#" class="subdued">{{reservation.time}}</a>
                            <a href="#" class="subdued">{{reservation.price}} $</a>
                        </p>
                    </ion-item>

                    <ion-item class="item-body">
                        <p>
                            This is Note
                        </p>
                    </ion-item>
                </ion-list>
            </ion-item>

            <ion-item menu-close="" class="item-divider item-icon-right">
                <i class="icon"></i>Done
            </ion-item>

            <ion-item class="egobie-history-empty"
                      ng-show="histories.length === 0">
                <hr align="center">No History<hr align="center">
            </ion-item>

            <ion-item class="egobie-history-list"
                      ng-repeat="(id, history) in histories"
                      ng-click="showHistory(id)">
                <div class="left">
                    <div class="price">{{history.price}}</div>
                    <div class="ontime">
                        <i class="icon ion-clock"></i>
                        <p>On time</p>
                    </div>
                </div>
                <div class="right">
                    <div class="egobie-range">
                        <div class="start">
                            <i class="dot"></i>
                            <i class="line"></i>
                            <p>{{history.start_time}}</p>
                        </div>
                        <div class="end">
                            <i class="dot"></i>
                            <p>{{history.end_time}}</p>
                        </div>
                    </div>
                    <div class="egobie-rating">
                        <rating max="max" readonly="true"
                                ng-model="history.rating"></rating>
                        <span class="egobie-history-rating"
                              ng-class="historyLabelStyle(history.rating)">{{historyPercent(history.rating)}}</span>
                    </div>
                    <div class="egobie-other">
                        <div class="plate">
                            <p class="title">PLATE</p>
                            <p class="content">{{history.plate}}</p>
                        </div>
                        <div class="maker">
                            <p class="title">MAKER</p>
                            <p class="content">{{history.maker}}</p>
                        </div>
                        <div class="model">
                            <p class="title">MODEL</p>
                            <p class="content">{{history.model}}</p>
                        </div>
                    </div>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>

    <script id="history-detail" type="text/ng-template">
        <ion-modal-view hide-nav-bar="true">
            <ion-header-bar class="bar bar-header bar-stable">
                <h1 class="title">HISTORY</h1>
                <button class="button button-icon icon ion-android-close"
                        ng-click="hideHistory()"></button>
            </ion-header-bar>
            <ion-content padding="true" class="has-header egobie-history-detail">
                <ion-list>
                    <ion-list>
                        <ion-item class="egobie-history-time">
                            <div class="section">Timeline</div>
                            <div class="top">
                                <div class="left">
                                    <div class="start">
                                        <p class="title">Start</P>
                                        <i class="icon ion-clock"></i>
                                        <p class="time">{{selectedHistory.start}}</p>
                                    </div>
                                    <div class="middle">
                                        <p class="title"></P>
                                        <i></i>
                                        <p class="time"></p>
                                    </div>
                                    <div class="end">
                                        <p class="title">End</P>
                                        <i class="icon ion-ios-circle-filled"></i>
                                        <p class="time">{{selectedHistory.end}}</p>
                                    </div>
                                </div>
                                <div class="right">
                                    <i class="icon ion-clock"></i>
                                    <p>On Time</p>
                                </div>
                            </div>
                            <div class="bottom">
                                <p>D4735E3A</p>
                            </div>
                        </ion-item>
                    </ion-list>

                    <ion-list>
                        <ion-item class="egobie-history-car">
                            <div class="section">Vehicle</div>
                            <div class="plate-state">
                                <div class="plate">
                                    <p class="title">Plate No.</p>
                                    <p class="content">{{selectedHistory.plate}}</p>
                                </div>
                                <div class="state">
                                    <p class="title">State</p>
                                    <p class="content">{{selectedHistory.state}}</p>
                                </div>
                            </div>
                            <div class="maker-model">
                                <div class="maker">
                                    <p class="title">Maker</p>
                                    <p class="content">{{selectedHistory.maker}}</p>
                                </div>
                                <div class="model">
                                    <p class="title">Model</p>
                                    <p class="content">{{selectedHistory.model}}</p>
                                </div>
                            </div>
                            <div class="year-color">
                                <div class="year">
                                    <p class="title">Year</p>
                                    <p class="content">{{selectedHistory.year}}</p>
                                </div>
                                <div class="color">
                                    <p class="title">Color</p>
                                    <p class="content">{{selectedHistory.color}}</p>
                                </div>
                            </div>
                        </ion-item>
                    </ion-list>

                    <ion-list>
                        <ion-item class="egobie-history-payment">
                            <div class="section">Payment</div>
                            <div class="name">
                                <p class="title">Holder Name</p>
                                <p class="content">{{selectedHistory.account_name}}</p>
                            </div>
                            <div class="number">
                                <p class="title">Account Number</p>
                                <p class="content">XXXX XXXX XXXX {{selectedHistory.account_number}}</p>
                            </div>
                            <div class="price-type">
                                <div class="price">
                                    <p class="title">Amount</p>
                                    <p class="content">{{selectedHistory.price}}</p>
                                </div>
                                <div class="type">
                                    <p class="title">Payment Type</p>
                                    <p class="content">{{selectedHistory.account_type}}</p>
                                </div>
                            </div>
                        </ion-item>
                    </ion-list>

                    <ion-list>
                        <ion-item class="egobie-history-service">
                            <div class="section">Service</div>
                            <div class="service"
                                 ng-repeat="service in selectedHistory.services">
                                <i class="dot"></i>
                                <i class="line"></i>
                                <p>{{service.name}}</p>
                                <div ng-repeat="item in service.items">
                                    <i></i>
                                    <p>{{item}}</p>
                                </div>
                            </div>
                        </ion-item>
                    </ion-list>
                </ion-list>
            </ion-content>
        </ion-modal-view>
    </script>
</ion-view>